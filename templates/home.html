{% extends "base.html" %}

{% block title %}Home - Mini Games Collection{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold text-primary mb-3">üéÆ Mini Games Collection</h1>
            <p class="lead text-muted">Test your skills with five unique and challenging mini-games!</p>
        </div>
    </div>
</div>

<div class="row g-4">
    <!-- Reverse Google Game -->
    <div class="col-md-6 col-lg-4">
        <div class="card game-card h-100">
            <div class="card-body d-flex flex-column">
                <div class="text-center mb-3">
                    <div class="game-icon mb-3">üîç</div>
                    <h5 class="card-title">Reverse Google</h5>
                </div>
                <p class="card-text flex-grow-1">
                    Guess the word from cryptic clues! Can you figure out what "round fruit doctor hates" means?
                </p>
                <div class="mt-auto">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <small class="text-muted">8 rounds</small>
                        <span class="badge bg-success" id="reverse-google-wins">0 wins</span>
                    </div>
                    <a href="{{ url_for('reverse_google') }}" class="btn btn-primary w-100">
                        <i class="fas fa-play"></i> Play Now
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Turing Test Game -->
    <div class="col-md-6 col-lg-4">
        <div class="card game-card h-100">
            <div class="card-body d-flex flex-column">
                <div class="text-center mb-3">
                    <div class="game-icon mb-3">ü§ñ</div>
                    <h5 class="card-title">Turing Test Puzzle</h5>
                </div>
                <p class="card-text flex-grow-1">
                    Spot the AI! Can you identify which response was generated by artificial intelligence?
                </p>
                <div class="mt-auto">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <small class="text-muted">6 rounds</small>
                        <span class="badge bg-success" id="turing-test-wins">0 wins</span>
                    </div>
                    <a href="{{ url_for('turing_test') }}" class="btn btn-primary w-100">
                        <i class="fas fa-play"></i> Play Now
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Gesture Memory Game -->
    <div class="col-md-6 col-lg-4">
        <div class="card game-card h-100">
            <div class="card-body d-flex flex-column">
                <div class="text-center mb-3">
                    <div class="game-icon mb-3">‚úã</div>
                    <h5 class="card-title">Gesture Memory</h5>
                </div>
                <p class="card-text flex-grow-1">
                    Remember the emoji sequence! Like Simon Says but with gestures and increasing difficulty.
                </p>
                <div class="mt-auto">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <small class="text-muted">Growing sequence</small>
                        <span class="badge bg-success" id="gesture-memory-wins">0 wins</span>
                    </div>
                    <a href="{{ url_for('gesture_memory') }}" class="btn btn-primary w-100">
                        <i class="fas fa-play"></i> Play Now
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Reverse Drawing Game -->
    <div class="col-md-6 col-lg-4">
        <div class="card game-card h-100">
            <div class="card-body d-flex flex-column">
                <div class="text-center mb-3">
                    <div class="game-icon mb-3">‚úèÔ∏è</div>
                    <h5 class="card-title">Reverse Drawing</h5>
                </div>
                <p class="card-text flex-grow-1">
                    Draw shapes with inverted controls! Move left to draw right in this mind-bending challenge.
                </p>
                <div class="mt-auto">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <small class="text-muted">3 shapes to complete</small>
                        <span class="badge bg-success" id="reverse-drawing-wins">0 wins</span>
                    </div>
                    <a href="{{ url_for('reverse_drawing') }}" class="btn btn-primary w-100">
                        <i class="fas fa-play"></i> Play Now
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Black Box Game -->
    <div class="col-md-6 col-lg-4">
        <div class="card game-card h-100">
            <div class="card-body d-flex flex-column">
                <div class="text-center mb-3">
                    <div class="game-icon mb-3">üì¶</div>
                    <h5 class="card-title">Black Box Challenge</h5>
                </div>
                <p class="card-text flex-grow-1">
                    Crack the hidden mathematical rule! Analyze patterns and deduce the secret formula.
                </p>
                <div class="mt-auto">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <small class="text-muted">Pattern detection</small>
                        <span class="badge bg-success" id="black-box-wins">0 wins</span>
                    </div>
                    <a href="{{ url_for('black_box') }}" class="btn btn-primary w-100">
                        <i class="fas fa-play"></i> Play Now
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Card -->
    <div class="col-md-6 col-lg-4">
        <div class="card border-secondary h-100">
            <div class="card-body d-flex flex-column text-center">
                <div class="mb-3">
                    <div class="game-icon mb-3">üìä</div>
                    <h5 class="card-title">Your Progress</h5>
                </div>
                <div class="flex-grow-1">
                    <div class="row text-center">
                        <div class="col-6">
                            <h3 class="text-primary" id="total-games-played">0</h3>
                            <small class="text-muted">Games Played</small>
                        </div>
                        <div class="col-6">
                            <h3 class="text-success" id="total-wins">0</h3>
                            <small class="text-muted">Total Wins</small>
                        </div>
                    </div>
                </div>
                <div class="mt-auto">
                    <button class="btn btn-outline-secondary w-100" onclick="clearStats()">
                        <i class="fas fa-trash"></i> Clear Stats
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    updateHomeStats();
});

function updateHomeStats() {
    const gameKeys = ['reverse-google', 'turing-test', 'gesture-memory', 'reverse-drawing', 'black-box'];
    let totalWins = 0;
    let totalGames = 0;
    
    gameKeys.forEach(gameKey => {
        const history = getGameHistory(gameKey);
        const wins = history.filter(game => game.completed).length;
        totalWins += wins;
        totalGames += history.length;
        
        // Update individual game win counters
        const winElement = document.getElementById(gameKey + '-wins');
        if (winElement) {
            winElement.textContent = wins + ' win' + (wins !== 1 ? 's' : '');
        }
    });
    
    // Update total stats
    const totalWinsElement = document.getElementById('total-wins');
    const totalGamesElement = document.getElementById('total-games-played');
    
    if (totalWinsElement) totalWinsElement.textContent = totalWins;
    if (totalGamesElement) totalGamesElement.textContent = totalGames;
}

function clearStats() {
    if (confirm('Are you sure you want to clear all game statistics? This cannot be undone.')) {
        localStorage.clear();
        updateHomeStats();
        updateWinsCounter();
        alert('All statistics have been cleared!');
    }
}
</script>
{% endblock %}
